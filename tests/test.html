<!DOCTYPE html>
<!--
    $ npm run build:esm
    $ npx http-server --port=8080
    $ open http://127.0.0.1:8080/tests/test.html
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proform test</title>
    
    <style>
        form {
            max-width: 50rem;
            
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        input {
            padding: 0.3rem;
            font-size: 1em;
        }
    </style>
</head>
<body>
    <script type="importmap">
        {
            "imports": {
                "react": "https://cdn.skypack.dev/react",
                "optics-ts": "https://cdn.skypack.dev/optics-ts",
                "classnames/dedupe": "https://cdn.skypack.dev/classnames/dedupe"
            }
        }
    </script>
    <script type="module">
        import htm from 'https://cdn.skypack.dev/htm';
        import React from 'https://cdn.skypack.dev/react';
        import ReactDOM from 'https://cdn.skypack.dev/react-dom';
        import * as Proform from '../lib-esm/proform.js';
        
        const html = htm.bind(React.createElement);
        
        const Form = Proform.makeForm();
        
        const App = () => {
            const [buffer, setBuffer] = React.useState({ name: '' });
            return html`
                <${Form.FormProvider}
                    buffer=${buffer}
                    updateBuffer=${setBuffer}
                >
                    <${Form.InputText}
                        accessor=${buffer => buffer.name}
                        update=${(buffer, name) => ({ ...buffer, name })}
                    />
                <//>
            `;
        };
        
        window.addEventListener('DOMContentLoaded', () => {
            // ReactDOM.render(html`<${App}/>`, document.body);
            ReactDOM.render(html`<${Proform.TestApp}/>`, document.body);
        });
    </script>
</body>
</html>
